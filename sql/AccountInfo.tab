DROP TABLE IF EXISTS `sr_user_account_info`;

##账户信息表
CREATE TABLE `sr_user_account_info` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增字段',
  `user_id` bigint(20) DEFAULT NULL COMMENT '用户ID',
  `cert_type` char(2) DEFAULT NULL COMMENT '证件类型',
  `cert_no` varchar(18) DEFAULT NULL COMMENT '证件号码',
  `name` varchar(60) DEFAULT NULL COMMENT '姓名',
  `card_no` varchar(20) DEFAULT NULL COMMENT '电子账户',
  `customer_no` varchar(11) DEFAULT NULL COMMENT '客户号',
  `out_serial_no` varchar(40) DEFAULT NULL COMMENT '申请流水号',
  `status` char(1) DEFAULT NULL COMMENT '订单状态 1 下单（等待网关访问后提交） 2 处理中（客户已提交，正在处理）3 订单关闭 4 超时关闭(超时时间:5分钟)',
  `rsp_code` char(2) DEFAULT NULL COMMENT '00 处理成功 01 查询渠道登记簿，未找到该渠道记录 02 查询机构登记簿，未找到该机构记录 03 渠道未关联支付通道 04 支付通道登记簿无此记录 05 该渠道不可操作此类账户 06 开户数量超限 07 交易密码不一致 08 平台预留手机号错误 09 绑卡数量超出限制 10 四要素鉴权失败',
  `set_password_flag` char(1) NOT NULL DEFAULT set_password_flag CHAR(1) DEFAULT '0' COMMENT '是否需要交易密码0:否;1:是;',
  `mobile` VARCHAR(11) NULL COMMENT '手机号',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` timestamp  NULL COMMENT '更新时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=25 DEFAULT CHARSET=utf8 COMMENT='账户信息表';

ALTER TABLE sr_user_account_info add COLUMN mobile VARCHAR(11) NULL COMMENT '手机号';


ALTER TABLE t_user_bank_accounts add COLUMN serial_no VARCHAR(60) NULL COMMENT '三方绑定编号(绑卡是返回的编号，解绑的时候要根据这个绑定编号解绑)';
ALTER TABLE t_user_bank_accounts add COLUMN mobile VARCHAR(11) NULL COMMENT '手机号';
ALTER TABLE t_user_bank_accounts add COLUMN account_type char(6) NULL COMMENT '账户类型';

DROP TABLE IF EXISTS `sr_response_data_sync`;
CREATE TABLE `sr_response_data_sync` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增字段',
  `user_id` bigint(20) DEFAULT NULL COMMENT '用户ID',
  `out_serial_no` varchar(40) DEFAULT NULL COMMENT '申请流水号',
  `order_id` varchar(32) DEFAULT NULL COMMENT '订单号',
  `url` varchar(250) DEFAULT NULL COMMENT '页面链接url',
  `remark` varchar(256) DEFAULT NULL COMMENT '预留字段',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=25 DEFAULT CHARSET=utf8 COMMENT='上饶银行存管同步响应表';


DROP TABLE IF EXISTS `sr_return_data`;
CREATE TABLE `sr_return_data` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增字段',
  `user_id` bigint(20) DEFAULT NULL COMMENT '用户ID',
  `out_serial_no` varchar(40) DEFAULT NULL COMMENT '申请流水号',
  `sequence_id` varchar(40) DEFAULT NULL COMMENT '序列ID',
  `service_name` varchar(50) DEFAULT NULL COMMENT '请求上饶存管服务名称',
  `data` longtext  COMMENT '响应数据',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT='请求流水表';

DROP TABLE IF EXISTS `sr_request_data`;
CREATE TABLE `sr_request_data` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增字段',
  `user_id` bigint(20) DEFAULT NULL COMMENT '用户ID',
  `out_serial_no` varchar(40) DEFAULT NULL COMMENT '申请流水号',
  `service_name` varchar(50) DEFAULT NULL COMMENT '请求上饶存管服务名称',
  `data` longtext  COMMENT '响应数据',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COMMENT='响应流水表';

ALTER TABLE t_bill_invests_order add COLUMN auth_code VARCHAR(20) NULL COMMENT '投标申请授权码';
ALTER TABLE t_bill_invests_order add COLUMN invests_id bigint(20) NULL COMMENT '投资表ID';

ALTER TABLE t_user_details MODIFY COLUMN id bigint;